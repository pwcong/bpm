{"version":3,"sources":["webpack:///./src/packages/components/desktop/address/item.tsx","webpack:///./src/packages/components/desktop/address/address.tsx","webpack:///./src/packages/components/desktop/input-select/types.ts","webpack:///./src/packages/components/desktop/input-select/utils.ts","webpack:///./src/packages/components/desktop/input-select/input.tsx","webpack:///./src/packages/components/mobile/popup/index.tsx","webpack:///./src/packages/components/desktop/input-address/index.tsx","webpack:///./src/packages/components/mobile/input-select/types.ts","webpack:///./src/packages/components/__test__.tsx","webpack:///./src/packages/components/desktop/address/index.tsx"],"names":["baseCls","props","_a","data","_b","direction","avatar","name","department","createElement","className","src","buildAddress","options","api","defaultValue","propsValue","value","onChange","isMulti","wrappedComponentRef","locale","_c","searchPlaceholder","_d","empty","emptyText","_e","useState","undefined","setValue","_f","setOptions","valueMap","reduce","p","c","set","id","Map","handleChange","useCallback","v","handleSearch","keyword","search","then","useEffect","current","handleOk","Promise","resolve","Search","placeholder","onSearch","length","map","o","i","key","checked","has","e","target","filter","concat","description","CloseCircleTwoTone","onClick","newValue","splice","ESelectorType","EHTMLType","EValueType","getValue","Array","isArray","valueCls","valueItemCls","buildInputSelect","selector","valueType","valueKeyProperty","valueTextProperty","valueRenderer","type","builder","title","InputSelect","style","beforeChange","onRenderItem","onRenderValue","htmlType","ok","okText","cancel","cancelText","selectorRef","useRef","_g","tempValue","setTempValue","_h","visible","setVisible","isOk","cb","_v","catch","handleCancel","handleTrigger","renderValue","object","CloseOutlined","cloneElement","onOk","onCancel","ref","main","onTrigger","PlusOutlined","dropdown","trigger","onVisibleChange","overlay","Fragment","maskClosable","call","forwardRef","forwardedRef","EPlacement","Address","modal","padding","InputAddress","default"],"mappings":"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","file":"4.index.min.js","sourcesContent":["import React from 'react';\nimport { Avatar } from 'antd';\nimport classnames from 'classnames';\nimport './item.scss';\nvar baseCls = 'bpm-cmpt-address-item';\nvar AddressItem = function (props) {\n    var _a;\n    var data = props.data, _b = props.direction, direction = _b === void 0 ? 'vertical' : _b;\n    var avatar = data.avatar, name = data.name, department = data.department;\n    return (React.createElement(\"div\", { className: classnames(baseCls, (_a = {},\n            _a[baseCls + \"--\" + direction] = !!direction,\n            _a)) },\n        React.createElement(\"div\", { className: baseCls + \"-avatar\" },\n            React.createElement(Avatar, { src: avatar }, name)),\n        React.createElement(\"div\", { className: baseCls + \"-info\" },\n            React.createElement(\"div\", { className: baseCls + \"-name\" }, name))));\n};\nexport default AddressItem;\n","import { __spreadArrays } from \"tslib\";\nimport React from 'react';\nimport { Input, Checkbox, Radio, Empty } from 'antd';\nimport { CloseCircleTwoTone } from '@ant-design/icons';\nimport classnames from 'classnames';\nimport AddressItem from './item';\nimport './style.scss';\nvar baseCls = 'bpm-cmpt-address';\nexport function buildAddress(options) {\n    var api = options.api;\n    var Address = function (props) {\n        var className = props.className, _a = props.defaultValue, defaultValue = _a === void 0 ? [] : _a, propsValue = props.value, onChange = props.onChange, isMulti = props.isMulti, wrappedComponentRef = props.wrappedComponentRef, _b = props.locale, locale = _b === void 0 ? {} : _b, _c = props.searchPlaceholder, searchPlaceholder = _c === void 0 ? '搜地址本' : _c;\n        var _d = locale.empty, emptyText = _d === void 0 ? '暂无数据' : _d;\n        var _e = React.useState(propsValue !== undefined ? propsValue : defaultValue), value = _e[0], setValue = _e[1];\n        var _f = React.useState([]), options = _f[0], setOptions = _f[1];\n        var valueMap = value.reduce(function (p, c) { return p.set(c.id, c); }, new Map());\n        var handleChange = React.useCallback(function (v) {\n            setValue(v);\n            onChange && onChange(v);\n        }, [onChange]);\n        var handleSearch = React.useCallback(function (keyword) {\n            api.search(keyword).then(function (options) {\n                setOptions(options);\n            });\n        }, []);\n        React.useEffect(function () {\n            handleSearch('');\n        }, []);\n        React.useEffect(function () {\n            propsValue && setValue(propsValue);\n        }, [propsValue]);\n        React.useEffect(function () {\n            wrappedComponentRef &&\n                wrappedComponentRef({\n                    current: {\n                        handleOk: function () { return Promise.resolve(value); },\n                    },\n                });\n        });\n        return (React.createElement(\"div\", { className: classnames(baseCls, className) },\n            React.createElement(\"div\", { className: baseCls + \"-wrapper\" },\n                React.createElement(\"div\", { className: baseCls + \"-t\" },\n                    React.createElement(Input.Search, { placeholder: searchPlaceholder, onSearch: function (search) {\n                            handleSearch(search);\n                        } })),\n                React.createElement(\"div\", { className: baseCls + \"-m\" }, options.length > 0 ? (React.createElement(\"div\", { className: baseCls + \"-list\" }, options.map(function (o, i) {\n                    return isMulti ? (React.createElement(Checkbox, { key: o.id || i, checked: valueMap.has(o.id), onChange: function (e) {\n                            var checked = e.target.checked;\n                            handleChange(value\n                                .filter(function (v) { return v.id !== o.id; })\n                                .concat(checked ? [o] : []));\n                        } },\n                        React.createElement(AddressItem, { direction: \"horizontal\", data: o }))) : (React.createElement(Radio, { key: o.id || i, checked: valueMap.has(o.id), onChange: function (e) {\n                            handleChange([o]);\n                        } },\n                        React.createElement(AddressItem, { direction: \"horizontal\", data: o })));\n                }))) : (React.createElement(Empty, { className: baseCls + \"-empty\", description: emptyText }))),\n                React.createElement(\"div\", { className: baseCls + \"-b\" },\n                    React.createElement(\"div\", { className: baseCls + \"-value\" }, value.map(function (v, i) { return (React.createElement(\"div\", { className: baseCls + \"-value-item\", key: v.id || i },\n                        React.createElement(AddressItem, { data: v }),\n                        React.createElement(CloseCircleTwoTone, { className: baseCls + \"-value-item-btn\", onClick: function () {\n                                var newValue = __spreadArrays(value);\n                                newValue.splice(i, 1);\n                                handleChange(newValue);\n                            } }))); }))))));\n    };\n    return Address;\n}\n","export var ESelectorType;\n(function (ESelectorType) {\n    ESelectorType[\"dropdown\"] = \"dropdown\";\n    ESelectorType[\"modal\"] = \"modal\";\n})(ESelectorType || (ESelectorType = {}));\nexport var EHTMLType;\n(function (EHTMLType) {\n    EHTMLType[\"input\"] = \"input\";\n    EHTMLType[\"textarea\"] = \"textarea\";\n})(EHTMLType || (EHTMLType = {}));\nexport var EValueType;\n(function (EValueType) {\n    EValueType[\"object\"] = \"object\";\n    EValueType[\"string\"] = \"string\";\n    EValueType[\"number\"] = \"number\";\n})(EValueType || (EValueType = {}));\n","export function getValue(value) {\n    return value !== undefined\n        ? (Array.isArray(value)\n            ? value\n            : [value].filter(function (v) { return v != null; }))\n        : undefined;\n}\n","import { __assign, __spreadArrays } from \"tslib\";\nimport React from 'react';\nimport { Dropdown, Modal } from 'antd';\nimport { PlusOutlined, CloseOutlined } from '@ant-design/icons';\nimport classnames from 'classnames';\nimport { EValueType, ESelectorType } from './types';\nimport { getValue } from './utils';\nimport './style.scss';\nvar baseCls = 'bpm-cmpt-inputselect';\nvar valueCls = baseCls + \"-value\";\nvar valueItemCls = valueCls + \"-item\";\nvar valueItemTitleCls = valueItemCls + \"-title\";\nvar valueItemBtnCls = valueItemCls + \"-btn\";\nexport function buildInputSelect(options) {\n    var selector = options.selector, valueType = options.valueType, _a = options.valueKeyProperty, valueKeyProperty = _a === void 0 ? 'value' : _a, _b = options.valueTextProperty, valueTextProperty = _b === void 0 ? 'text' : _b, valueRenderer = options.valueRenderer;\n    var type = selector.type, builder = selector.builder, title = selector.title;\n    var InputSelect = function (props) {\n        var _a;\n        var className = props.className, style = props.style, defaultValue = props.defaultValue, propsValue = props.value, onChange = props.onChange, beforeChange = props.beforeChange, onRenderItem = props.onRenderItem, onRenderValue = props.onRenderValue, isMulti = props.isMulti, htmlType = props.htmlType, _b = props.placeholder, placeholder = _b === void 0 ? '请选择' : _b, _c = props.locale, locale = _c === void 0 ? {} : _c;\n        var _d = locale.ok, okText = _d === void 0 ? '确定' : _d, _e = locale.cancel, cancelText = _e === void 0 ? '取消' : _e;\n        var selectorRef = React.useRef();\n        var _f = React.useState(getValue(defaultValue) || []), value = _f[0], setValue = _f[1];\n        var _g = React.useState(), tempValue = _g[0], setTempValue = _g[1];\n        var _h = React.useState(false), visible = _h[0], setVisible = _h[1];\n        React.useEffect(function () {\n            if (tempValue !== propsValue) {\n                setTempValue(propsValue);\n                setValue(getValue(propsValue) || []);\n            }\n        }, [propsValue]);\n        var handleChange = React.useCallback(function (v, isOk) {\n            if (!isMulti) {\n                v.length > 0 && (v = [v[v.length - 1]]);\n            }\n            isOk && setVisible(false);\n            var cb = function (_v) {\n                setValue(_v);\n                if (isMulti) {\n                    onChange && onChange(_v);\n                }\n                else {\n                    onChange && onChange(_v[0] || null);\n                }\n            };\n            if (beforeChange) {\n                beforeChange(v)\n                    .then(cb)\n                    .catch(function () {\n                });\n            }\n            else {\n                cb(v);\n            }\n        }, [isMulti, onChange]);\n        var handleOk = React.useCallback(function (v) {\n            handleChange(v, true);\n        }, [handleChange]);\n        var handleCancel = React.useCallback(function () {\n            handleChange(__spreadArrays(value), true);\n        }, [value]);\n        var handleTrigger = React.useCallback(function () {\n            setVisible(true);\n        }, []);\n        var renderValue = React.useCallback(function (v) {\n            if (v.length <= 0) {\n                return React.createElement(\"div\", { className: valueCls + \"-placeholder\" }, placeholder);\n            }\n            if (onRenderValue !== undefined) {\n                return onRenderValue(v);\n            }\n            if (valueType === EValueType.object) {\n                return v.map(function (_v, i) { return (React.createElement(\"span\", { key: _v[valueKeyProperty] || i, className: valueItemCls },\n                    React.createElement(\"span\", { className: valueItemTitleCls }, onRenderItem ? onRenderItem(_v, i, v) : _v[valueTextProperty]),\n                    React.createElement(\"span\", { className: valueItemBtnCls },\n                        React.createElement(CloseOutlined, { onClick: function () {\n                                v.splice(i, 1);\n                                handleChange(__spreadArrays(v));\n                            } })))); });\n            }\n            else {\n                return v.map(function (_v, i) { return (React.createElement(\"span\", { key: i, className: valueItemCls },\n                    React.createElement(\"span\", { className: valueItemTitleCls }, onRenderItem ? onRenderItem(_v, i, v) : _v),\n                    React.createElement(\"span\", { className: valueItemBtnCls },\n                        React.createElement(CloseOutlined, { onClick: function () {\n                                v.splice(i, 1);\n                                handleChange(__spreadArrays(v));\n                            } })))); });\n            }\n        }, [placeholder, onRenderValue, onRenderItem, valueType]);\n        var selector = React.cloneElement(builder(__assign(__assign({}, props), { onOk: handleOk, onCancel: handleCancel, defaultValue: value, value: value, wrappedComponentRef: function (ref) {\n                return (selectorRef.current = ref.current);\n            } })));\n        var main = (React.createElement(\"div\", { className: classnames(baseCls, className, (_a = {},\n                _a[baseCls + \"--\" + type] = !!type,\n                _a[baseCls + \"--\" + htmlType] = !!htmlType,\n                _a)), style: style }, valueRenderer ? (React.cloneElement(valueRenderer(__assign(__assign({}, props), { onChange: handleChange, defaultValue: value, value: value, onTrigger: handleTrigger })))) : (React.createElement(\"div\", { className: baseCls + \"-wrapper\" },\n            React.createElement(\"div\", { className: baseCls + \"-value\" }, renderValue(value)),\n            React.createElement(\"div\", { className: baseCls + \"-trigger\", onClick: handleTrigger },\n                React.createElement(PlusOutlined, null))))));\n        return type === ESelectorType.dropdown ? (React.createElement(Dropdown, { visible: visible, trigger: ['click'], onVisibleChange: function (v) { return !v && handleCancel(); }, overlay: React.createElement(\"div\", { className: baseCls + \"-dropdown\" }, selector) }, main)) : (React.createElement(React.Fragment, null,\n            main,\n            React.createElement(Modal, { maskClosable: false, title: title, visible: visible, okText: okText, cancelText: cancelText, onCancel: handleCancel, onOk: function () {\n                    var _a, _b;\n                    (_b = (_a = selectorRef.current) === null || _a === void 0 ? void 0 : _a.handleOk) === null || _b === void 0 ? void 0 : _b.call(_a).then(function (v) { return handleChange(v, true); });\n                } }, selector)));\n    };\n    var WrappedInputSelect = React.forwardRef(function (props, ref) { return React.createElement(InputSelect, __assign({}, props, { forwardedRef: ref })); });\n    return WrappedInputSelect;\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport classnames from 'classnames';\nimport { CloseOutlined } from '@ant-design/icons';\nimport './style.scss';\nexport var EPlacement;\n(function (EPlacement) {\n    EPlacement[\"bottom\"] = \"bottom\";\n    EPlacement[\"right\"] = \"right\";\n})(EPlacement || (EPlacement = {}));\nvar baseCls = 'm-bpm-cmpt-popup';\nvar headerCls = baseCls + \"-header\";\nvar contentCls = baseCls + \"-content\";\nvar Popup = function (props) {\n    var _a;\n    var _b = props.placement, placement = _b === void 0 ? EPlacement.bottom : _b, title = props.title, visible = props.visible, className = props.className, style = props.style, onClose = props.onClose, _c = props.operation, operation = _c === void 0 ? {} : _c, children = props.children;\n    var left = operation.left, right = operation.right;\n    var _d = React.useState(), container = _d[0], setContainer = _d[1];\n    React.useEffect(function () {\n        var el = document.createElement('div');\n        document.body.appendChild(el);\n        setContainer(el);\n        return function () {\n            document.body.removeChild(el);\n        };\n    }, []);\n    return container\n        ? ReactDOM.createPortal(React.createElement(\"div\", { className: classnames(baseCls, className, (_a = {\n                    hidden: !visible\n                },\n                _a[baseCls + \"--\" + placement] = !!placement,\n                _a)), style: style },\n            React.createElement(\"div\", { className: baseCls + \"-mask\", onClick: onClose }),\n            React.createElement(\"div\", { className: baseCls + \"-wrapper\" },\n                React.createElement(\"div\", { className: headerCls },\n                    React.createElement(\"div\", { className: headerCls + \"-title\" }, title),\n                    React.createElement(\"div\", { className: headerCls + \"-operation \" + headerCls + \"-l\" }, left),\n                    React.createElement(\"div\", { className: headerCls + \"-operation \" + headerCls + \"-r\" },\n                        right,\n                        onClose && (React.createElement(\"div\", { className: headerCls + \"-close\", onClick: onClose },\n                            React.createElement(CloseOutlined, null))))),\n                React.createElement(\"div\", { className: contentCls }, children))), container)\n        : null;\n};\nexport default Popup;\n","import { __assign } from \"tslib\";\nimport React from 'react';\nimport { buildAddress } from '@/packages/components/desktop/address';\nimport { buildInputSelect } from '@/packages/components/desktop/input-select';\nimport { ESelectorType, EValueType, } from '@/packages/components/desktop/input-select/types';\nvar Address = buildAddress({\n    api: {\n        search: function () { return Promise.resolve([]); },\n    },\n});\nvar InputAddress = buildInputSelect({\n    selector: {\n        title: '地址本',\n        type: ESelectorType.modal,\n        builder: function (props) { return React.createElement(Address, __assign({}, props)); },\n    },\n    valueType: EValueType.object,\n    valueKeyProperty: 'id',\n    valueTextProperty: 'name',\n});\nexport default InputAddress;\n","export var ESelectorType;\n(function (ESelectorType) {\n    ESelectorType[\"popup\"] = \"popup\";\n    ESelectorType[\"drawer\"] = \"drawer\";\n})(ESelectorType || (ESelectorType = {}));\n","import React from 'react';\nimport { Desktop } from './index';\nvar Test = function () {\n    return (React.createElement(\"div\", { style: { padding: '8px' } },\n        React.createElement(\"div\", null,\n            React.createElement(Desktop.InputAddress.default, null))));\n};\nexport default Test;\n","import { buildAddress } from './address';\nexport * from './types';\nexport { buildAddress };\n"],"sourceRoot":""}